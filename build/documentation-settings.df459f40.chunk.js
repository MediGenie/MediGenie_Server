"use strict";(self.webpackChunkmedigenie_app=self.webpackChunkmedigenie_app||[]).push([[8503],{31346:(P,u,e)=>{e.r(u),e.d(u,{default:()=>b});var t=e(67294),r=e(86896),s=e(41054),l=e(84338),f=e(185),v=e(53979),M=e(29728),g=e(49066),E=e(41580),x=e(11047),R=e(75515),A=e(11276),O=e(74571),y=e(20707),n=e(16364),d=e(85018),i=e(8934),o=e(94123),c=e(80826),p=e(93742),a=e(90306),m=e(71997),L=e(25752);const U=(0,m.ZP)(L.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:h})=>h.colors.neutral600};
    }
  }
`;var B=e(87561);const K=B.Ry().shape({restrictedAccess:B.O7(),password:B.Z_().when("restrictedAccess",(h,D)=>h?D.required(l.I0.required):D)}),b=()=>{(0,l.go)();const{formatMessage:h}=(0,r.Z)(),{submitMutation:D,data:I,isLoading:w}=(0,a.Z)(),[C,$]=(0,t.useState)(!1),F=S=>{D.mutate({prefix:I?.prefix,body:S})};return t.createElement(f.o,null,w?t.createElement(l.dO,null,"Plugin settings are loading"):t.createElement(s.J9,{initialValues:{restrictedAccess:I?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:F,validationSchema:K},({handleSubmit:S,values:T,handleChange:H,errors:Z,setFieldTouched:z,setFieldValue:W})=>t.createElement(l.l0,{noValidate:!0,onSubmit:S},t.createElement(v.T,{title:h({id:(0,p.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:h({id:(0,p.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:t.createElement(l.jW,{permissions:c.Z.update},t.createElement(M.z,{type:"submit",startIcon:t.createElement(d.Z,null)},h({id:(0,p.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),t.createElement(g.D,null,t.createElement(E.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(x.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(R.Z,{variant:"delta",as:"h2"},h({id:"global.settings",defaultMessage:"Settings"})),t.createElement(A.r,{gap:4},t.createElement(O.P,{col:6,s:12},t.createElement(y.s,{name:"restrictedAccess",label:h({id:(0,p.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:h({id:(0,p.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:T.restrictedAccess,onChange:()=>{T.restrictedAccess===!0&&(W("password","",!1),z("password",!1,!1)),W("restrictedAccess",!T.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),T.restrictedAccess&&t.createElement(O.P,{col:6,s:12},t.createElement(n.o,{label:h({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:C?"text":"password",value:T.password,onChange:H,error:Z.password?h({id:Z.password,defaultMessage:"Invalid value"}):null,endAction:t.createElement(U,{onClick:Q=>{Q.stopPropagation(),$(N=>!N)},label:h(C?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},C?t.createElement(i.Z,null):t.createElement(o.Z,null))})))))))))}},90306:(P,u,e)=>{e.d(u,{Z:()=>v});var t=e(88767),r=e(84338),s=e(49950),l=e(798);const v=()=>{const M=(0,t.useQueryClient)(),g=(0,r.lm)(),{isLoading:E,isError:x,data:R}=(0,t.useQuery)(["get-documentation",s.Z],async()=>{try{const{data:a}=await n(`/${s.Z}/getInfos`);return a}catch{return g({type:"warning",message:{id:"notification.error"}}),null}}),{del:A,post:O,put:y,get:n}=(0,r.kY)(),d=a=>{g({type:"warning",message:a.response.payload.message})},i=(a,m)=>{M.invalidateQueries("get-documentation"),g({type:a,message:{id:(0,l.Z)(m)}})},o=(0,t.useMutation)(({prefix:a,version:m})=>A(`${a}/deleteDoc/${m}`),{onSuccess:()=>i("info","notification.delete.success"),onError:a=>d(a)}),c=(0,t.useMutation)(({prefix:a,body:m})=>y(`${a}/updateSettings`,m),{onSuccess:()=>i("success","notification.update.success"),onError:d}),p=(0,t.useMutation)(({prefix:a,version:m})=>O(`${a}/regenerateDoc`,{version:m}),{onSuccess:()=>i("info","notification.generate.success"),onError:a=>d(a)});return{data:R,isLoading:E,isError:x,deleteMutation:o,submitMutation:c,regenerateDocMutation:p}}},798:(P,u,e)=>{e.d(u,{Z:()=>s});var t=e(49950);const s=l=>`${t.Z}.${l}`},93742:(P,u,e)=>{e.d(u,{O:()=>t.Z});var t=e(798)},49066:(P,u,e)=>{e.d(u,{D:()=>f});var t=e(85893),r=e(67294),s=e(45697),l=e(41580);const f=({children:v})=>(0,t.jsx)(l.x,{paddingLeft:10,paddingRight:10,children:v});f.propTypes={children:s.node.isRequired}},53979:(P,u,e)=>{e.d(u,{T:()=>A});var t=e(85893),r=e(67294),s=e(45697),l=e(71997);const f=n=>{const d=(0,r.useRef)(null),[i,o]=(0,r.useState)(!0),c=([p])=>{o(p.isIntersecting)};return(0,r.useEffect)(()=>{const p=d.current,a=new IntersectionObserver(c,n);return p&&a.observe(d.current),()=>{p&&a.disconnect()}},[d,n]),[d,i]};var v=e(95355);const M=(n,d)=>{const i=(0,v.W)(d);(0,r.useLayoutEffect)(()=>{const o=new ResizeObserver(i);return Array.isArray(n)?n.forEach(c=>{c.current&&o.observe(c.current)}):n.current&&o.observe(n.current),()=>{o.disconnect()}},[n,i])};var g=e(41580),E=e(11047),x=e(75515);const R=()=>{const n=(0,r.useRef)(null),[d,i]=(0,r.useState)(null),[o,c]=f({root:null,rootMargin:"0px",threshold:0});return M(o,()=>{o.current&&i(o.current.getBoundingClientRect())}),(0,r.useEffect)(()=>{n.current&&i(n.current.getBoundingClientRect())},[n]),{containerRef:o,isVisible:c,baseHeaderLayoutRef:n,headerSize:d}},A=n=>{const{containerRef:d,isVisible:i,baseHeaderLayoutRef:o,headerSize:c}=R();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{height:c?.height},ref:d,children:i&&(0,t.jsx)(y,{ref:o,...n})}),!i&&(0,t.jsx)(y,{...n,sticky:!0,width:c?.width})]})};A.displayName="HeaderLayout";const O=(0,l.ZP)(g.x)`
  width: ${n=>n.width}px;
  z-index: ${({theme:n})=>n.zIndices[1]};
`,y=r.forwardRef(({navigationAction:n,primaryAction:d,secondaryAction:i,subtitle:o,title:c,sticky:p,width:a,...m},L)=>{const j=typeof o=="string";return p?(0,t.jsx)(O,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:a,"data-strapi-header-sticky":!0,children:(0,t.jsxs)(E.k,{justifyContent:"space-between",children:[(0,t.jsxs)(E.k,{children:[n&&(0,t.jsx)(g.x,{paddingRight:3,children:n}),(0,t.jsxs)(g.x,{children:[(0,t.jsx)(x.Z,{variant:"beta",as:"h1",...m,children:c}),j?(0,t.jsx)(x.Z,{variant:"pi",textColor:"neutral600",children:o}):o]}),i?(0,t.jsx)(g.x,{paddingLeft:4,children:i}):null]}),(0,t.jsx)(E.k,{children:d?(0,t.jsx)(g.x,{paddingLeft:2,children:d}):void 0})]})}):(0,t.jsxs)(g.x,{ref:L,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,t.jsx)(g.x,{paddingBottom:2,children:n}):null,(0,t.jsxs)(E.k,{justifyContent:"space-between",children:[(0,t.jsxs)(E.k,{minWidth:0,children:[(0,t.jsx)(x.Z,{as:"h1",variant:"alpha",...m,children:c}),i?(0,t.jsx)(g.x,{paddingLeft:4,children:i}):null]}),d]}),j?(0,t.jsx)(x.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:o}):o]})});y.displayName="BaseHeaderLayout",y.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},y.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,sticky:s.bool,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired,width:s.number},A.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},A.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired}},185:(P,u,e)=>{e.d(u,{o:()=>f});var t=e(85893),r=e(71997),s=e(41580);const l=(0,r.ZP)(s.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,f=({labelledBy:v="main-content-title",...M})=>(0,t.jsx)(l,{"aria-labelledby":v,as:"main",id:"main-content",tabIndex:-1,...M})}}]);
